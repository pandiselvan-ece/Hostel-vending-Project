<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hostel Vending Delivery</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Hostel Vending Delivery</div>
    <nav class="nav-right">
      <button id="to-admin" class="btn ghost small">Admin</button>
      <div id="user-area" class="user-area hidden">
        <span id="user-welcome" class="muted"></span>
        <button id="logout" class="btn">Logout</button>
      </div>
    </nav>
  </header>

  <main class="container">
    <!-- Auth panel (register/login) -->
    <section id="authPanel" class="auth-panel">
      <h2>Sign in or Register</h2>

      <div class="tabs">
        <button id="tabLogin" class="tab active">Login</button>
        <button id="tabRegister" class="tab">Register</button>
      </div>

      <div id="loginBox">
        <input id="loginEmail" type="email" placeholder="Email" />
        <input id="loginPass" type="password" placeholder="Password" />
        <div class="center">
          <button id="loginBtn" class="btn primary">Login</button>
        </div>
        <p id="loginMsg" class="muted"></p>
      </div>

      <div id="registerBox" style="display:none">
        <input id="regName" type="text" placeholder="Full name" />
        <input id="regEmail" type="email" placeholder="Email" />
        <input id="regPass" type="password" placeholder="Password (min 6 chars)" />
        <input id="regRoom" type="text" placeholder="Room (optional)" />
        <input id="regPhone" type="tel" placeholder="Phone (10 digits)" />
        <div class="center">
          <button id="registerBtn" class="btn primary">Register</button>
        </div>
        <p id="regMsg" class="muted"></p>
      </div>
    </section>

    <!-- Dashboard (hidden until logged in) -->
    <section id="dashboard" style="display:none">
      <div class="dashboard-top">
        <div>
          <h3>Hello, <span id="displayName"></span></h3>
          <div class="muted">Order from the vending machine below â€” admin edits reflect instantly.</div>
        </div>
        <div class="center gap">
          <button id="refreshBtn" class="btn ghost small">Refresh</button>
          <button id="openAdmin" class="btn ghost small">Admin</button>
        </div>
      </div>

      <h4>Vending Machine (A1 - G6)</h4>
      <div id="productGrid" class="grid"></div>

      <h4 style="margin-top:18px">Your Orders</h4>
      <div id="myOrders" class="orders-list"></div>
    </section>
  </main>

  <!-- Order Modal -->
  <div id="orderModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <button id="closeModal" class="close-x">&times;</button>
      <img id="modalImg" src="" alt="product image" />
      <h3 id="modalTitle"></h3>
      <p id="modalSlot" class="muted"></p>

      <label class="label">Phone for call verification</label>
      <input id="orderPhone" type="tel" placeholder="10 digit phone number" />

      <label class="label">Room (optional)</label>
      <input id="orderRoom" type="text" placeholder="Room e.g. 402A" />

      <div class="center" style="margin-top:12px">
        <button id="placeOrderBtn" class="btn primary">Place Order (we'll call)</button>
        <button id="cancelOrderBtn" class="btn" style="margin-left:8px">Cancel</button>
      </div>
      <p id="orderFeedback" class="muted"></p>
    </div>
  </div>

  <!-- Firebase libs (compat for simple use) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

  <script src="app.js"></script>
  <script>
    // Initialize page behaviour (app.js exposes initUserPage)
    initUserPage();
  </script>
</body>
</html>
